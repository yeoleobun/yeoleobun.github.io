---
title: "等价关系的应用"
pubDatetime: 2024-07-08T15:52:15+08:00
description: "通过等价关系理解有环图转无环图，NFA 转 DFA 及一般函数转单射"
tags: [数理逻辑,线性代数]
---
## 定义：

对于集合 $X$ 中任意元素 $a$，$b$，$c$，$X$ 上的二元关系 $\sim$  满足：
* 自反性：$a \sim a$
* 对称性：$a \sim b$ 当且仅当 $ b\sim a$
* 传递性：$a \sim b $ 且 $ b \sim c $ 则 $a \sim c$

则称 $\sim$ 为 $X$ 上的**等价关系**。

例：模 $n$ 同余是一个等价关系，因为它满足：
* $a \equiv a \pmod n$
* $a \equiv b \pmod n \Leftrightarrow b \equiv a \pmod n$
* $a \equiv b \pmod n \land b \equiv c \pmod n \Rightarrow a \equiv c \pmod n$

## 集合的划分

集合 $X$ 的划分是一组 $X$ 的非空子集，$X$ 中的任意一个元素 $x$ 属于且仅属于其中一个子集。或者说这组子集两两不相交，并且他们的并等于 $X$。

通过等价关系 $\sim$ 可以给出集合 $S$ 上的一个划分，记为 $S / \sim$。如果 $a \sim b$，把它们放在同一个子集中。由自反性可知任意 $x$ 至少属于一个子集；由传递性可知 $x$ 仅属于其中一个子集，否则任取不同子集的两个元素 $y \not \sim z$，有 $x \sim y$ 和 $x \sim z$，因此 $y \sim z$，矛盾。

通过划分也可以定义等价关系 $\sim$，$a \sim b$ 当 $a$ 和 $b$ 在同一个子集中。

## 有环图转换为无环图

如果有向图中任意两个顶点之间都有路径，则称该图为**强连通**的。

有向图的子图如果是强连通的，并且最大，则称该子图为图的**强连通分量**。这里的大是指的是包含关系，即不存在另外一个强连通子图包含它。

显然，两个点属于同一个强连通分量是一个等价关系。他将图划分为若干个强连通分量，一个分量作为一个顶点，顶点之间的边合并为分量之间的边，就是一个无环图。

## NFA 转 DFA

NFA 转 DFA 使用的技巧和等价关系也有些类似，也是通过分组将元素归类。

### 子集和幂集

集合 $S$ 的**幂集** $\mathcal P(S)$ 是全体 $S$ 的**子集**，也就是说集合 $S$ 的子集是 $\cal P (S)$ 的一个元素。

对于函数，给定任意定义域中元素，值域中有**唯一**的元素与之对应，而一般二元关系可以有多个。二元关系中，对应同一个定义域元素的值域元素是值域的子集，也是值域幂集的一个元素。因此把值域换成值域的幂集，可以通过二元关系构造一个函数。

### 确定性（Deterministic）和非确定性（Non-Deterministic）：

在 Haskell 中，$\mathtt{List}$ 代表非确定性计算。如果说函数 $f: X \to Y$ 是确定性的，那 $\tilde f: X \to \mathtt{List} \;Y$ 是非确定性的。对于任意 $x \in X$，$f(x)$ 是一个 $Y$ 的值，而 $\tilde f(x)$ 是一组 $Y$ 的值。如果把这组值当成一个整体，他又是确定性的。

在 NFA 中，对于状态集合 $S$ 和输入集合 $\Sigma$，任意状态 $s \in S$ 经由输入 $x \in \Sigma$ 能够到达的状态是 $S$ 的子集，也是 $\mathcal{P}(S)$ 的一个元素，作为一个整体是确定性的。

##  线性映射的核

从二元关系可以构造函数，从一般函数也可以构造单射。

对于函数 $f: X \to Y$，在定义域 $X$ 上定义等价关系 $x_1 \sim x_2$ 当 $f(x_1) = f(x_2)$，可以得到定义域的一个划分 $X / \sim $。定义函数 $\tilde f: X / \sim  \to Y$，$\tilde f(\bar x) = f(x)$（$\bar x$ 是 $x$ 所在的划分），$\tilde f$ 是一个单射。

线性映射 $T: V \to W$ 的核 $\text{ker}(T)$ 是满足 $T(v) = 0 \;(v \in V)$ 的集合。当$T(v_1) = T(v_2)$ 时，$T(v_1 - v_2) = T(v_1) - T(v_2) = 0$，即 $v_1 - v_2 \in \text{ker}(T)$。

由 $\text{ker}(T)$ 定义 $V$ 上的等价关系 $v_1 \sim v_2$ 当 $v_1 - v_2 \in \text{ker}(T)$，可以得到一个双射 $\tilde T: V / \text{Ker}(T) \to \text{image}(T)$（ $\text{image}(T)$ 是 $T$ 的像 ），即第一同构定理。

